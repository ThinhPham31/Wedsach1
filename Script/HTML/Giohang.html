<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Giỏ Hàng</title>
    <link rel="stylesheet" type="text/css" href="/Script/CSS/Giohang.css">
</head>
<body>
    <!--header-->
    <header>
        <div id="logo">
            <a href="/index.html">
                <img src="/Images/logo.png" alt="Logo">
            </a>
        </div>
        <div class="search-bar">
            <input type="text" placeholder="Tìm Kiếm">
            <button>
                <img src="/Images/search.png">
            </button>
        </div>
        <div class="icons">
            <div><img src="/Images/shopping.png"><br><a href="./Giohang.html">Giỏ Hàng</a></div>
            <div><img src="/Images/email_2099199.png"><br><a href="./Gopy.html">Góp ý</a></div>
            <div><img src="/Images/human.png"><br><a href="./Dangnhap.html">Tài Khoản</a></div>
            <div><img src="/Images/bell.png"><br><a href="./Thongbao.html">Thông Báo</a></div>
        </div>
    </header>
    <!--nav-->
    <nav>
        <div class="container">
            <ul id="menu">
                <li><a href="#">&#9776;Danh Mục</a>
                    <ul class="sub-menu">
                        <li><a href="#">Sách ngoại văn</a></li>
                        <li><a href="#">Sách online</a>
                            <ul class="sub-menu">
                                <li><a href="#">hina</a></li>
                                <li><a href="#">hina</a></li>
                                <li><a href="#">hina</a></li>
                            </ul>
                        </li>
                        <li><a href="">Sách Sale theo chủ đề</a></li>
                        <li><a href="">Sách theo nhà cung cấp</a></li>
                        <li><a href="">Văn phòng phẩm</a></li>
                        <li><a href="">Quà tặng</a></li>
                        <li><a href="">Đồ chơi</a></li>
                        <li><a href="">Blog sách hay</a></li>
                    </ul>
                </li>
            </ul>
        </div>
        <div class="map">
            <div><img src="/Images/map.png"><br><a href="./Diadiem.html">Hệ Thống Cửa Hàng</a></div>
        </div>
        
    </nav>
    <!--body-->
    <div id="giohang">
      <div class="cart-header">Giỏ Hàng</div>
      <table class="cart-table">
          <thead>
              <tr>
                  <th>Chọn</th>
                  <th>Sản phẩm</th>
                  <th>Số lượng</th>
                  <th>Thành tiền</th>
              </tr>
          </thead>
          <tbody id="cart-items">
              <tr data-id="1">
                  <td><input type="checkbox" class="item-check" checked></td>
                  <td>
                    <img class="imgitems" src="/Images/pic14.png" alt="Nexus">
                    <br>Nhật Ký Thức Ăn
                  </td>
                  <td>
                      <div class="quantity-control">
                          <button class="decrease-btn">-</button>
                          <span class="quantity">1</span>
                          <button class="increase-btn">+</button>
                      </div>
                  </td>
                  <td class="item-total" data-price="265000">265,000đ</td>
              </tr>
              <tr data-id="2">
                  <td><input type="checkbox" class="item-check"></td>
                  <td>
                    <img class="imgitems" src="/Images/pic15.png" alt="Nexus">
                    <br>Hãy Nhớ Tên Anh Ấy
                  </td>
                  <td>
                      <div class="quantity-control">
                          <button class="decrease-btn">-</button>
                          <span class="quantity">1</span>
                          <button class="increase-btn">+</button>
                      </div>
                  </td>
                  <td class="item-total" data-price="99000">99,000đ</td>
              </tr>
              <tr data-id="3">
                  <td><input type="checkbox" class="item-check"></td>
                  <td>
                    <img class="imgitems" src="/Images/pic1.png" alt="Nexus">
                    <br>Tuyển Tập Thơ Của Lưu Quang Vũ
                  </td>
                  <td>
                      <div class="quantity-control">
                          <button class="decrease-btn">-</button>
                          <span class="quantity">1</span>
                          <button class="increase-btn">+</button>
                      </div>
                  </td>
                  <td class="item-total" data-price="143000">143,000đ</td>
              </tr>
          </tbody>
      </table>
      <div class="total-section">
          Tổng số tiền: <span id="total-price">265,000đ</span>
      </div>
      <div class="total-section">
          <a href="#" class="checkout-btn">Thanh Toán</a>
      </div>
    </div>
    <!--js-->
    <script>
      function updateTotal() {
          const cartItems = document.querySelectorAll("#cart-items tr");
          let total = 0;

          cartItems.forEach((item) => {
              const checkbox = item.querySelector(".item-check");
              const quantity = parseInt(item.querySelector(".quantity").textContent);
              const price = parseInt(item.querySelector(".item-total").dataset.price);

              if (checkbox.checked) {
                  total += quantity * price;
              }
          });

          document.getElementById("total-price").textContent = new Intl.NumberFormat("vi-VN", {
              style: "currency",
              currency: "VND",
          }).format(total);
      }

      document.querySelectorAll(".increase-btn").forEach((btn) => {
          btn.addEventListener("click", (e) => {
              const quantitySpan = e.target.closest(".quantity-control").querySelector(".quantity");
              let quantity = parseInt(quantitySpan.textContent);
              quantity++;
              quantitySpan.textContent = quantity;

              updateTotal();
          });
      });

      document.querySelectorAll(".decrease-btn").forEach((btn) => {
          btn.addEventListener("click", (e) => {
              const quantitySpan = e.target.closest(".quantity-control").querySelector(".quantity");
              let quantity = parseInt(quantitySpan.textContent);
              if (quantity > 1) {
                  quantity--;
                  quantitySpan.textContent = quantity;
              }

              updateTotal();
          });
      });

      document.querySelectorAll(".item-check").forEach((checkbox) => {
          checkbox.addEventListener("change", () => {
              updateTotal();
          });
      });

      updateTotal();
    </script>
    <!-- Footer -->
    <div class="footer">
        <div>
            <h4>Dịch Vụ</h4>
            <p><a href="./Gioithieu.html">Giới thiệu</a></p>
            <p><a href="./Dieukhoan.html">Điều khoản sử dụng</a></p>
        </div>
        <div>
            <h4>Chính Sách</h4>
            <p><a href="./Doitra.html">Chính sách đổi - trả - hoàn tiền</a></p>
        </div>
        <div>
            <h4>Thông Tin</h4>
            <p><a href="./Diadiem.html">Tra cứu địa chỉ</a></p>
        </div>
        <div class="social">
            <h4>Kết Nối Với Chúng Tôi</h4>
            <img src="/Images/social_15707737.png"></img> <!-- Facebook icon -->
            <img src="/Images/tiktok_3116491.png"></img> <!-- TikTok icon -->
            <img src="/Images/social_15707814.png"></img> <!-- YouTube icon -->
        </div>
    </div>
</body>
</html>